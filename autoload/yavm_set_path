#!/usr/bin/env zsh

_yavm_get_versions

local force cmd_name cmd_versions prefix suffix

if [[ "$1" = "--force" ]]; then
  force="--force"
fi

for cmd_name cmd_versions in ${(kv)_yavm_versions}; do
  prefix="${(P)${:-YAVM_PREFIX_${(U)cmd_name}}}"

  if [[ -n "$prefix" ]]; then
    suffix="${(P)${:-YAVM_SUFFIX_${(U)cmd_name}}:-/bin}"

    _yavm_add_entries_to_path_with_prefix \
      "${prefix}" \
      "$force" \
      ${prefix}${^${(s: :)cmd_versions}}${^${(s: :)${suffix}}}(-/N)
  fi
done
